{% extends 'layout.html' %}

{% block title %}Organiser - Create Session{% endblock %}

{% block content %}
<div class="center-content">
  <h2>Create a Session</h2>

  <form method="post" enctype="multipart/form-data">
    <div>
      <label for="title">Session name</label><br>
      <input type="text" id="title" name="title" required>
    </div>

    <div>
      <label for="description">Description</label><br>
      <textarea id="description" name="description" rows="4" cols="50" placeholder="Short summary of the session"></textarea>
    </div>

    <div style="display:flex; gap:12px; align-items:center; margin-top:8px;">
      <div>
        <label for="date">Date</label><br>
        <input type="date" id="date" name="date" required>
      </div>

      <div>
        <label for="time">Time</label><br>
        <input type="time" id="time" name="time" required>
      </div>

      <div>
        <label for="capacity">Capacity</label><br>
        <input type="number" id="capacity" name="capacity" min="1" value="10">
      </div>
    </div>

    <div style="margin-top:8px;">
      <label for="image">Upload image (optional)</label><br>
      <input type="file" id="image" name="image" accept="image/*">
    </div>

    <div style="margin-top:12px;">
      <button type="submit">Create session</button>
    </div>
  </form>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <p class="flash {{ category }}">{{ message }}</p>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <hr>
  <h3>Existing sessions</h3>
  {% if sessions %}
    <ul>
      {% for s in sessions %}
        <li>
          <strong>{{ s[1] }}</strong> â€” {{ s[2] }} at {{ s[3] }} (capacity: {{ s[4] }})
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No sessions yet.</p>
  {% endif %}
</div>
{% endblock %}